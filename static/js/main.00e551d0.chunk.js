(this.webpackJsonpexchange=this.webpackJsonpexchange||[]).push([[0],{27:function(e,t,a){e.exports=a(56)},37:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(7),u=a.n(c),l=a(5),o=a(1),i=a(24),s=a(8),d=a(26),m="CHANGE_DEFAULT_CURRENCY",f="ADD_NEW_CURRENCY",v="FETCH_EXCHANGE_RATES",p="EDIT_TOTAL_VALUE",E="ASCENDING_CURRENCY_ORDER",y="DESCENDING_CURRENCY_ORDER",b="DELETE_CURRENCY",h="EDIT_CURRENCY",g="EDIT_CURRENCIES_VALUES",O={PLN:"z\u0142",USD:"$",CAD:"$",AUD:"$",EUR:"\u20ac",GBP:"\xa3",CHF:"fr",CNY:"\xa5",JPY:"\xa5",KRW:"\u20a9"},N="https://api.exchangeratesapi.io",C=/^[1-9][0-9]{0,9}(\.[0-9]{1,2})?$/;function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=Object(l.c)({wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var a=Object(d.a)(e),r=t.overload,n=r.shortcut,c=r.amount,u=r.currentValue,l=r.previousValue,o=a.find((function(e){return e.shortcut===n}));return o?(o.amount+=c,o.currentValue+=u,o.previousValue+=l):a.push(t.overload),a.sort((function(e,t){return t.currentValue-e.currentValue})),a;case b:return e.filter((function(e){return e.shortcut!==t.shortcut}));case h:var i=e.map((function(e){return e.shortcut===t.overload.shortcut?t.overload:e}));return i.sort((function(e,t){return t.currentValue-e.currentValue})),i;case g:var s=t.overload,m=s.currentRates,v=s.previousRates,p=e.map((function(e){return V({},e,{currentValue:e.amount/m[e.shortcut],previousValue:e.amount/v[e.shortcut]})}));return p;default:return e}},exchangeRates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.overload.yesterday?t.overload:D({},t.overload,{yesterday:null});default:return e}},defaultCurrency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PLN",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.currency;default:return e}},totalValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:0,previous:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.overload;default:return e}}}),w=(a(37),a(12)),x=a.n(w),S=a(25),P=a(13),T=a.n(P),U=function(e){var t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(r,"-").concat(a,"-").concat(t)},A=function(){var e=new Date;return e.setDate(e.getDate()-7),U(e)},k=function(){var e=new Date;return e.setDate(e.getDate()-8),U(e)},F=function(e,t,a){var r=e/a.latest[t];return{currentValue:r,previousValue:a.yesterday?e/a.yesterday[t]:r}},Y=function(e){return function(){var t=Object(S.a)(x.a.mark((function t(a){var r,n,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("".concat(N,"/history?start_at=").concat(k(),"&end_at=").concat(A(),"&base=").concat(e));case 2:if(r=t.sent,!(n=r.data.rates)[A()]||!n[k()]){t.next=9;break}a(I(n[A()],n[k()])),a({type:v,overload:{latest:n[A()],yesterday:n[k()]}}),t.next=14;break;case 9:return t.next=11,T.a.get("".concat(N,"/latest?base=").concat(e));case 11:c=t.sent,a(I(c.data.rates,c.data.rates)),a({type:v,overload:{latest:c.data.rates}});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(e,t){return{type:g,overload:{currentRates:e,previousRates:t}}},L=a(3),G=Object(o.b)((function(e){return{defaultCurrency:e.defaultCurrency,exchangeRates:e.exchangeRates}}),{deleteCurrency:function(e){return{type:b,shortcut:e}},editCurrency:function(e,t,a,r){return{type:h,overload:{shortcut:e,amount:t,currentValue:a,previousValue:r}}}})((function(e){var t=e.shortcut,a=e.amount,c=e.currentValue,u=e.previousValue,l=e.isEditing,o=e.firstTime,i=e.walletIsValid,s=e.walletNotValid,d=e.isWalletValid,m=Object(r.useState)(a),f=Object(L.a)(m,2),v=f[0],p=f[1],E=Object(r.useState)(!0),y=Object(L.a)(E,2),b=y[0],h=y[1],g=function(){var e=100*(c/u-1);return e>=0?n.a.createElement("span",{className:"percent positive"},"(+".concat(e.toFixed(2),"%)")):n.a.createElement("span",{className:"percent negative"},"(".concat(e.toFixed(2),"%)"))};return l?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"currency-edit"},n.a.createElement("div",{className:"currency"},n.a.createElement("div",{className:"currency__item currency-header"},n.a.createElement("strong",null,t),n.a.createElement("button",{onClick:function(){return e.deleteCurrency(t)},className:"button--delete"},n.a.createElement("i",{className:"fas fa-times fa-2x"}))),n.a.createElement("input",{onChange:function(e){var t=e.target.value,a=C.test(t);p(t),a?(h(!0),i()):(h(!1),s())},value:v,type:"text",id:"value",placeholder:"value",className:"input--amount"}),n.a.createElement("div",{className:"currency__item"},c.toFixed(2)+O[e.defaultCurrency],g())),n.a.createElement("button",{onClick:function(){return e.deleteCurrency(t)},className:"button--delete"},n.a.createElement("i",{className:"fas fa-trash fa-2x"}))),b?void 0:n.a.createElement("p",{className:"error negative"},"Value must be in (12.34) format and can't be larger than 10 digits!")):(o||function(){if(d&&b&&Number(v)!==a){var r=F(Number(v),t,e.exchangeRates),n=r.currentValue,c=r.previousValue;e.editCurrency(t,Number(v),n,c)}}(),n.a.createElement("div",{className:"currency-edit"},n.a.createElement("div",{className:"currency"},n.a.createElement("div",{className:"currency__item"},n.a.createElement("strong",null,t)),n.a.createElement("div",{className:"currency__item"},a+O[t]),n.a.createElement("div",{className:"currency__item"},c.toFixed(2)+O[e.defaultCurrency],g()))))})),W=Object(o.b)((function(e){return{wallet:e.wallet}}),{ascendingCurrencyOrder:function(){return{type:E}},descendingCurrencyOrder:function(){return{type:y}},editTotalValue:function(e,t){return{type:p,overload:{current:e,previous:t}}}})((function(e){var t=Object(r.useState)(!0),a=Object(L.a)(t,2),c=a[0],u=a[1],l=Object(r.useState)(!0),o=Object(L.a)(l,2),i=o[0],s=o[1],d=Object(r.useState)(!1),m=Object(L.a)(d,2),f=m[0],v=m[1],p=0,E=0;Object(r.useEffect)((function(){e.editTotalValue(E,p),p=0,E=0}));var y=function(){s(!0)},b=function(){s(!1)};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"header"},n.a.createElement("h2",{className:"header__title"},"Your Wallet"),n.a.createElement("button",{onClick:function(){f&&i?v(!1):f||(u(!1),v(!0))},className:"button--edit"},f?"Save":"Edit")),n.a.createElement("div",{className:"break"}),n.a.createElement("div",{className:"currency-list"},e.wallet.map((function(e){var t=e.shortcut,a=e.amount,r=e.currentValue,u=e.previousValue;return p+=u,E+=r,n.a.createElement(G,{key:t,firstTime:c,shortcut:t,amount:a,currentValue:r,previousValue:u,walletIsValid:y,walletNotValid:b,isEditing:f,isWalletValid:i})}))))})),H=function(e){return["PLN","USD","CAD","AUD","EUR","GBP","CHF","CNY","JPY","KRW"].map((function(e){return n.a.createElement("option",{key:e,value:e},e)}))},J=Object(o.b)((function(e){return{exchangeRates:e.exchangeRates,defaultCurrency:e.defaultCurrency}}),{addCurrency:function(e,t,a,r){return{type:f,overload:{shortcut:e,amount:t,currentValue:a,previousValue:r}}}})((function(e){var t=Object(r.useState)(""),a=Object(L.a)(t,2),c=a[0],u=a[1],l=Object(r.useState)("USD"),o=Object(L.a)(l,2),i=o[0],s=o[1],d=Object(r.useState)(!0),m=Object(L.a)(d,2),f=m[0],v=m[1];return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),C.test(c)){v(!0);var a=Number(c),r=F(a,i,e.exchangeRates),n=r.currentValue,l=r.previousValue;e.addCurrency(i,a,n,l),u("")}else v(!1)},className:"form-inline"},n.a.createElement("select",{value:i,onChange:function(e){var t=e.target.value;s(t);var a=C.test(t);v(!!a)},id:"currency",className:"input--currency"},n.a.createElement(H,null)),n.a.createElement("input",{onChange:function(e){var t=e.target.value,a=C.test(t);u(t),v(!!a)},value:c,type:"text",id:"value",placeholder:"value",className:"input--amount"}),n.a.createElement("button",{type:"submit",className:"button--submit mob"},"Add")),f?void 0:n.a.createElement("p",{className:"error negative"},"Value must be in (12.34) format and can't be larger than 10 digits!"))})),$=Object(o.b)((function(e){return{currentTotalValue:e.totalValue.current,previousTotalValue:e.totalValue.previous,defaultCurrency:e.defaultCurrency}}))((function(e){return n.a.createElement("div",{className:"jumbotron"},n.a.createElement("h1",{className:"jumbotron__balance"},n.a.createElement("div",null,"Your balance: "),n.a.createElement("div",null,e.currentTotalValue.toFixed(2)),O[e.defaultCurrency],function(){var t=100*(e.currentTotalValue/e.previousTotalValue-1);if(e.currentTotalValue)return t>=0?n.a.createElement("span",{className:"percent positive"}," ( +".concat(t.toFixed(2),"% )")):n.a.createElement("span",{className:"percent negative"}," (".concat(t.toFixed(2),"%)"))}()))})),B=Object(o.b)(null,{changeDefaultCurrency:function(e){return{type:m,currency:e}},fetchExchangeRates:Y,editCurrenciesValues:I})((function(e){var t=Object(r.useState)(e.defaultCurrency),a=Object(L.a)(t,2),c=a[0],u=a[1];return n.a.createElement("div",null,n.a.createElement("h2",{className:"header--right small"},"Change your currency to:"),n.a.createElement("div",{className:"form-inline change"},n.a.createElement("select",{value:c,onChange:function(e){return u(e.target.value)},id:"currency",className:"input--currency"},n.a.createElement(H,null)),n.a.createElement("button",{onClick:function(){c!==e.defaultCurrency&&(e.fetchExchangeRates(c,e.defaultCurrency),e.changeDefaultCurrency(c))},type:"submit",className:"button--submit"},"Change")))})),X=Object(o.b)((function(e){return{defaultCurrency:e.defaultCurrency}}),{fetchExchangeRates:Y})((function(e){var t=e.defaultCurrency;return Object(r.useEffect)((function(){return e.fetchExchangeRates(t)}),[]),n.a.createElement("main",{className:"main-container"},n.a.createElement($,null),n.a.createElement("div",{className:"divided-container"},n.a.createElement("div",{className:"divided-container__card left"},n.a.createElement(W,null)),n.a.createElement("div",{className:"divided-container__card"},n.a.createElement("h2",{className:"header--right"},"Add Currency"),n.a.createElement("div",{className:"forms"},n.a.createElement(J,null),n.a.createElement(B,{defaultCurrency:t})))))})),K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,M=Object(l.e)(R,K(Object(l.a)(i.a)));u.a.render(n.a.createElement(o.a,{store:M},n.a.createElement(X,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.00e551d0.chunk.js.map